<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Given a list of data frames containing tracking information and two variable of interest the function use
density based clustering as introduced in Ester et al. (1996). Also, the function use the DBSCAN method from Hennig (2020) to discriminate active and inactive states in a 2d space."><title>Determine active or inactive states according to density based clustering method. — activity2 • MoveR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Roboto-0.4.0/font.css" rel="stylesheet"><link href="../deps/_JetBrains%20Mono-0.4.0/font.css" rel="stylesheet"><link href="../deps/_Roboto%20Slab-0.4.0/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Determine active or inactive states according to density based clustering method. — activity2"><meta property="og:description" content="Given a list of data frames containing tracking information and two variable of interest the function use
density based clustering as introduced in Ester et al. (1996). Also, the function use the DBSCAN method from Hennig (2020) to discriminate active and inactive states in a 2d space."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MoveR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--how-to">
    <span class="fas fa fas fa-book"></span>
     
    How To
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--how-to">
    <a class="dropdown-item" href="../articles/MoveR-ImportData.html">Import Data</a>
    <a class="dropdown-item" href="../articles/MoveR-Clean-FilterData.html">Clean/Filter Data</a>
    <a class="dropdown-item" href="../articles/MoveR-ComputeMetrics.html">Compute some metrics</a>
    <a class="dropdown-item" href="../articles/MoveR-SensitivityAnalysis.html">Conduct Sensitivity Analysis</a>
    <a class="dropdown-item" href="../articles/MoveR-ParallelComputation.html">Perform Parallel Computation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fas fa fas fa-history"></span>
     
    Changelog
  </a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/qpetitjean/MoveR/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Determine active or inactive states according to density based clustering method.</h1>
      <small class="dont-index">Source: <a href="https://github.com/qpetitjean/MoveR/blob/HEAD/R/activity2.R" class="external-link"><code>R/activity2.R</code></a></small>
      <div class="d-none name"><code>activity2.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given a list of data frames containing tracking information and two variable of interest the function use
density based clustering as introduced in Ester et al. (1996). Also, the function use the DBSCAN method from Hennig (2020) to discriminate active and inactive states in a 2d space.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">activity2</span><span class="op">(</span></span>
<span>  <span class="va">trackDat</span>,</span>
<span>  var1 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var1T <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var2T <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nbins <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  eps <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  minPts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  graph <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>trackDat</dt>
<dd><p>A list of data frame containing tracking information for each tracklet.</p></dd>


<dt>var1</dt>
<dd><p>A character string indicating the name of the variable to use as the first dimension.</p></dd>


<dt>var2</dt>
<dd><p>A character string indicating the name of the variable to use as the second dimension.</p></dd>


<dt>var1T</dt>
<dd><p>A function used to transform var1 (e.g., log, sqrt - optional).</p></dd>


<dt>var2T</dt>
<dd><p>A function used to transform var2 (e.g., log, sqrt - optional).</p></dd>


<dt>nbins</dt>
<dd><p>A numeric value indicating the number of bins in both vertical and horizontal directions (default = 100).</p></dd>


<dt>eps</dt>
<dd><p>A numeric value specifying the reachability distance (Ester et al., 1996), which correspond to the maximum distance around cluster's members (see <code><a href="https://rdrr.io/pkg/fpc/man/dbscan.html" class="external-link">dbscan</a></code>).</p></dd>


<dt>minPts</dt>
<dd><p>A numeric value specifying the reachability minimum no. of points (Ester et al., 1996), which correspond to the minimum number of point per cluster (see <code><a href="https://rdrr.io/pkg/fpc/man/dbscan.html" class="external-link">dbscan</a></code>).</p></dd>


<dt>scale</dt>
<dd><p>A logical value (i.e., TRUE or FALSE) indicating whether the data should be centered (i.e., values minus the mean) and scaled (divided by the standard deviation) (default = TRUE).</p></dd>


<dt>na.rm</dt>
<dd><p>A logical value (i.e., TRUE or FALSE) indicating whether NA values should be stripped before the computation proceeds (default = TRUE).</p></dd>


<dt>graph</dt>
<dd><p>A logical value (i.e., TRUE or FALSE) indicating whether the various diagnostics plots should be displayed or not (default = TRUE).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>This function returns the results of the classification (actives vs. inactives) appended to
the original list of data frame containing tracking information for each tracklet.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    
<ul><li><p>Christian Hennig (2020). fpc: Flexible Procedures for Clustering. R package version 2.2-9. <a href="https://CRAN.R-project.org/package=fpc" class="external-link">https://CRAN.R-project.org/package=fpc</a></p></li>
<li><p>Martin Ester, Hans-Peter Kriegel, Joerg Sander, Xiaowei Xu (1996). A Density-Based Algorithm for Discovering Clusters in Large Spatial Databases with Noise. Institute for Computer Science, University of Munich. Proceedings of 2nd International Conference on Knowledge Discovery and Data Mining (KDD-96).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/fpc/man/dbscan.html" class="external-link">dbscan</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Quentin PETITJEAN</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Not run:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Download the first dataset from the sample data repository</span></span></span>
<span class="r-in"><span><span class="va">Path2Data</span> <span class="op">&lt;-</span> <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="DLsampleData.html">DLsampleData</a></span><span class="op">(</span>dataSet <span class="op">=</span> <span class="fl">1</span>, tracker <span class="op">=</span> <span class="st">"TRex"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Path2Data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "C:\\Users\\quent\\AppData\\Local\\Temp\\RtmpIBGA5h\\MoveR_SampleData-main\\sample_1\\TRexOutput"                                                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2] "C:\\Users\\quent\\AppData\\Local\\Temp\\RtmpIBGA5h\\MoveR_SampleData-main\\sample_1\\ReferenceData\\DistMatrixFromArenaEdge_2602_ISA3080_Low_5.mov_1800.txt"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "C:\\Users\\quent\\AppData\\Local\\Temp\\RtmpIBGA5h\\MoveR_SampleData-main\\sample_1\\ReferenceData\\RefDat_2602_ISA3080_Low_5.csv"                          </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Import the list containing the 9 vectors classically used for further computation</span></span></span>
<span class="r-in"><span><span class="va">Data</span> <span class="op">&lt;-</span> <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="readTrex.html">readTrex</a></span><span class="op">(</span><span class="va">Path2Data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># convert it to a list of tracklets</span></span></span>
<span class="r-in"><span><span class="va">trackDat</span> <span class="op">&lt;-</span> <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="convert2Tracklets.html">convert2Tracklets</a></span><span class="op">(</span><span class="va">Data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span>, by <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># infinite values that are present in the tracking output should be removed</span></span></span>
<span class="r-in"><span><span class="co">## define the filter</span></span></span>
<span class="r-in"><span><span class="va">filter.Inf</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="filterFunc.html">filterFunc</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">trackDat</span>,</span></span>
<span class="r-in"><span>    toFilter <span class="op">=</span> <span class="st">"x.pos"</span>,</span></span>
<span class="r-in"><span>    customFunc <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/r/base/is.finite.html" class="external-link">is.infinite</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### filter Infinite values</span></span></span>
<span class="r-in"><span><span class="va">trackDat.Infilt</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="filterTracklets.html">filterTracklets</a></span><span class="op">(</span><span class="va">trackDat</span>,</span></span>
<span class="r-in"><span>                     filter <span class="op">=</span> <span class="va">filter.Inf</span>,</span></span>
<span class="r-in"><span>                     splitCond <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                     minDur <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### remove some tracklet to speed up the computation</span></span></span>
<span class="r-in"><span><span class="va">trackdat2</span> <span class="op">&lt;-</span> <span class="va">trackDat.Infilt</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">75</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check the tracklet</span></span></span>
<span class="r-in"><span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="drawTracklets.html">drawTracklets</a></span><span class="op">(</span><span class="va">trackdat2</span>,</span></span>
<span class="r-in"><span>                 timeCol <span class="op">=</span> <span class="st">"frame"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="activity2-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add some metric to the dataset to perform 2d clustering (speed and turning angle)</span></span></span>
<span class="r-in"><span><span class="co"># and smooth them by computing the mean value over a 10 frames' sliding window</span></span></span>
<span class="r-in"><span><span class="va">Tstep</span> <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="va">trackdat3</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="analyseTracklets.html">analyseTracklets</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">trackdat2</span>,</span></span>
<span class="r-in"><span>    customFunc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="co"># specify a first function to compute speed over each tracklet (a modulus present within the MoveR package)</span></span></span>
<span class="r-in"><span>      speed <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span>        <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="speed.html">speed</a></span><span class="op">(</span><span class="va">x</span>,</span></span>
<span class="r-in"><span>                     timeCol <span class="op">=</span> <span class="st">"frame"</span>,</span></span>
<span class="r-in"><span>                     scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="co"># compute turning angle in radians over each tracklet (a modulus present within the MoveR package)</span></span></span>
<span class="r-in"><span>      TurnAngle <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span>        <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="turnAngle.html">turnAngle</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>          <span class="va">x</span>,</span></span>
<span class="r-in"><span>          timeCol <span class="op">=</span> <span class="st">"frame"</span>,</span></span>
<span class="r-in"><span>          unit <span class="op">=</span> <span class="st">"radians"</span>,</span></span>
<span class="r-in"><span>          scale <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>        <span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="co"># smooth variance of turning angles</span></span></span>
<span class="r-in"><span>      SlideVarAngle <span class="op">=</span> <span class="kw">function</span> <span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-in"><span>        <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="slidWindow.html">slidWindow</a></span><span class="op">(</span><span class="va">y</span><span class="op">$</span><span class="va">TurnAngle</span>,</span></span>
<span class="r-in"><span>                       Tstep <span class="op">=</span> <span class="va">Tstep</span>, <span class="kw">function</span> <span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span>                         <span class="fu">circular</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/circular/man/variance.html" class="external-link">var</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>                           <span class="fu">circular</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/circular/man/circular.html" class="external-link">circular</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>                             <span class="va">x</span>,</span></span>
<span class="r-in"><span>                             type <span class="op">=</span> <span class="st">"angle"</span>,</span></span>
<span class="r-in"><span>                             units <span class="op">=</span> <span class="st">"radians"</span>,</span></span>
<span class="r-in"><span>                             zero <span class="op">=</span> <span class="fl">0</span></span></span>
<span class="r-in"><span>                           <span class="op">)</span>,</span></span>
<span class="r-in"><span>                           na.rm <span class="op">=</span> <span class="cn">T</span></span></span>
<span class="r-in"><span>                         <span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="co"># smooth speed</span></span></span>
<span class="r-in"><span>      SlidemeanSpeed <span class="op">=</span> <span class="kw">function</span> <span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-in"><span>        <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="slidWindow.html">slidWindow</a></span><span class="op">(</span><span class="va">y</span><span class="op">$</span><span class="va">speed</span>,</span></span>
<span class="r-in"><span>                       Tstep <span class="op">=</span> <span class="va">Tstep</span>, <span class="kw">function</span> <span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span>                         <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use density based clustering to classify actives and inactives states in a 2 dimension array (here the speed and the angle variance)</span></span></span>
<span class="r-in"><span><span class="co"># when graph = TRUE, several graphical output are displayed:</span></span></span>
<span class="r-in"><span><span class="co"># - the distribution of inactives states</span></span></span>
<span class="r-in"><span><span class="co"># - the resuls of the density based clustering with the two groups displayed</span></span></span>
<span class="r-in"><span><span class="co"># - a similar representation but as hexbinplot, with the count</span></span></span>
<span class="r-in"><span><span class="co"># - the final representation of the 2d clustering with the increasing size of the dot representing the increasing number of count</span></span></span>
<span class="r-in"><span><span class="co"># - a pie chart representing the proportion of actives vs inactives states</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">trackdat3</span> <span class="op">&lt;-</span> <span class="fu">MoveR</span><span class="fu">::</span><span class="fu">activity2</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">trackdat3</span>,</span></span>
<span class="r-in"><span>  var1 <span class="op">=</span> <span class="st">"SlidemeanSpeed"</span>,</span></span>
<span class="r-in"><span>  var2 <span class="op">=</span> <span class="st">"SlideVarAngle"</span>,</span></span>
<span class="r-in"><span>  var1T <span class="op">=</span> <span class="va">log10</span>,</span></span>
<span class="r-in"><span>  nbins <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>  eps <span class="op">=</span> <span class="fl">0.15</span>,</span></span>
<span class="r-in"><span>  minPts <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  scale <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  na.rm <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  graph <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Clusters identified !"</span>
<span class="r-plt img"><img src="activity2-2.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="activity2-3.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="activity2-4.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="activity2-5.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="activity2-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># draw the particle' trajectory and spot the inactive moments using red dots</span></span></span>
<span class="r-in"><span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="drawTracklets.html">drawTracklets</a></span><span class="op">(</span><span class="va">trackdat3</span>,</span></span>
<span class="r-in"><span>          cex.start <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>          add2It <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">trackdat3</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>            <span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>              <span class="va">trackdat3</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"x.pos"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">trackdat3</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"activity2"</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="st">"inactive"</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>              <span class="va">trackdat3</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"y.pos"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">trackdat3</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"activity2"</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="st">"inactive"</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>              col <span class="op">=</span> <span class="st">"red"</span>,</span></span>
<span class="r-in"><span>              pch <span class="op">=</span> <span class="fl">19</span>,</span></span>
<span class="r-in"><span>              cex <span class="op">=</span> <span class="fl">1.5</span></span></span>
<span class="r-in"><span>            <span class="op">)</span></span></span>
<span class="r-in"><span>          <span class="op">}</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="activity2-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## End(Not run)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://qpetitjean.github.io/qpetitjean_distill/" class="external-link">Quentin PETITJEAN</a>, <a href="https://vcalcagnoresearch.wordpress.com/" class="external-link">Vincent CALCAGNO</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

