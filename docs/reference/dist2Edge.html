<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Given a data frame containing tracking information for a given tracklet and a data frame containing the
coordinates of an object edges, this function compute the euclidean distance between the edge of the object (e.g., the arena)
and the coordinates of the particle over its trajectory. The function then returns the distance between each points of the particle's
trajectory and the closest point to the object edge."><title>Compute the distance from the particle to the edge of an object (e.g., the arena) over its trajectory. — dist2Edge • MoveR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.6/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.6/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.6/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Compute the distance from the particle to the edge of an object (e.g., the arena) over its trajectory. — dist2Edge"><meta property="og:description" content="Given a data frame containing tracking information for a given tracklet and a data frame containing the
coordinates of an object edges, this function compute the euclidean distance between the edge of the object (e.g., the arena)
and the coordinates of the particle over its trajectory. The function then returns the distance between each points of the particle's
trajectory and the closest point to the object edge."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MoveR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--how-to">
    <span class="fas fa fas fa-book"></span>
     
    How To
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--how-to">
    <a class="dropdown-item" href="../articles/MoveR-ImportData.html">Import Data</a>
    <a class="dropdown-item" href="../articles/MoveR-Clean-FilterData.html">Clean/Filter Data</a>
    <a class="dropdown-item" href="../articles/MoveR-ComputeMetrics.html">Compute some metrics</a>
    <a class="dropdown-item" href="../articles/MoveR-PatternId.html">Sequences identification</a>
    <a class="dropdown-item" href="../articles/MoveR-ParallelComputation.html">Parallel computing</a>
    <a class="dropdown-item" href="../articles/MoveR-SensitivityAnalysis.html">Detection performances</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fas fa fas fa-history"></span>
     
    Changelog
  </a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/qpetitjean/MoveR/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Compute the distance from the particle to the edge of an object (e.g., the arena) over its trajectory.</h1>
      <small class="dont-index">Source: <a href="https://github.com/qpetitjean/MoveR/blob/HEAD/R/dist2Edge.R" class="external-link"><code>R/dist2Edge.R</code></a></small>
      <div class="d-none name"><code>dist2Edge.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given a data frame containing tracking information for a given tracklet and a data frame containing the
coordinates of an object edges, this function compute the euclidean distance between the edge of the object (e.g., the arena)
and the coordinates of the particle over its trajectory. The function then returns the distance between each points of the particle's
trajectory and the closest point to the object edge.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dist2Edge</span><span class="op">(</span><span class="va">df</span>, <span class="va">edge</span>, <span class="va">customFunc</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>df</dt>
<dd><p>A data frame containing at x, y coordinates named "x.pos", "y.pos", for a tracklet.</p></dd>


<dt>edge</dt>
<dd><p>A data frame containing x, y coordinates named "x.pos", "y.pos" specifiyng the location of the
arena or any object edge.</p></dd>


<dt>customFunc</dt>
<dd><p>A function used to specify the formula allowing to compute the distance between a given object or arena edge and the particle over its trajectory.
It is possible to call already implemented methods for circular or polygonal arena by calling customFunc = "CircularArena" or customFunc = "PolygonArena", respectively.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>This function returns a vector containing the distance between each points of the
trajectory and the closest point of the object edge. If customFunc argument is an already implemented method (i.e., "CircularArena", "PolygonArena") negative values indicate increasing distance
from the edge of the object in the direction of its center (the particle is considered inside) and vice versa.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="dist2Pt.html">dist2Pt</a></code>, <code><a href="locPos.html">locPos</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Quentin PETITJEAN</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># generate a dummy tracklet</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2023</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## start to specify some parameters to generate the tracklet</span></span></span>
<span class="r-in"><span><span class="va">TrackL</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fl">100</span> <span class="co"># the length of the tracklet or a sequence to randomly sample tracklet's length</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TrackDatTemp</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">trajr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/trajr/man/TrajGenerate.html" class="external-link">TrajGenerate</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">TrackL</span>, <span class="fl">1</span><span class="op">)</span>, random <span class="op">=</span> <span class="cn">TRUE</span>, fps <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">TrackDat</span> <span class="op">&lt;-</span> <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="trackletsClass.html">trackletsClass</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    x.pos <span class="op">=</span> <span class="va">TrackDatTemp</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">TrackDatTemp</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    y.pos <span class="op">=</span> <span class="va">TrackDatTemp</span><span class="op">[[</span><span class="st">"y"</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">TrackDatTemp</span><span class="op">[[</span><span class="st">"y"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    frame <span class="op">=</span> <span class="va">TrackDatTemp</span><span class="op">[[</span><span class="st">"time"</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Exemple 1: With a circular arena</span></span></span>
<span class="r-in"><span><span class="co"># simulate a circular arena of 20 pixels radius and centered on the particle trajectory</span></span></span>
<span class="r-in"><span><span class="va">arenaEdge</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="circles.html">circles</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">TrackDat</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"x.pos"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">TrackDat</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"y.pos"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            radius <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>                            draw <span class="op">=</span> <span class="cn">F</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">arenaEdge</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	500 obs. of  2 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ x.pos: num  51.3 51.3 51.3 51.2 51.2 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ y.pos: num  24.4 24.7 25 25.2 25.5 ...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># draw the tracklet and the arena edge</span></span></span>
<span class="r-in"><span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="drawTracklets.html">drawTracklets</a></span><span class="op">(</span><span class="va">TrackDat</span>,</span></span>
<span class="r-in"><span>                 imgRes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>, <span class="fl">80</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 add2It <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">graphics</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/graphics/polygon.html" class="external-link">polygon</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>                   x <span class="op">=</span> <span class="va">arenaEdge</span><span class="op">[[</span><span class="st">"x.pos"</span><span class="op">]</span><span class="op">]</span>, y <span class="op">=</span> <span class="va">arenaEdge</span><span class="op">[[</span><span class="st">"y.pos"</span><span class="op">]</span><span class="op">]</span>, cex <span class="op">=</span> <span class="fl">0.1</span></span></span>
<span class="r-in"><span>                 <span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="dist2Edge-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compute the distance to the closest part of the edge based on the form of the arena (here circular)</span></span></span>
<span class="r-in"><span><span class="co"># Negative values indicate increasing distance from the edge of the object in the direction of its center (the particle is considered inside) and vice versa.</span></span></span>
<span class="r-in"><span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu">dist2Edge</span><span class="op">(</span><span class="va">TrackDat</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                 edge <span class="op">=</span> <span class="va">arenaEdge</span>,</span></span>
<span class="r-in"><span>                 customFunc <span class="op">=</span> <span class="st">"CircularArena"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  18.7823577  16.4582563  15.0931207  13.8661236  13.3560386  11.9547261</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7]  11.4459542  10.2583611   9.5002640   9.2819667   8.8674120   8.9262716</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13]   8.5717987   7.5194782   7.3970682   6.6314271   5.7005973   4.3696927</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19]   2.6922671   0.9774847  -0.8916157  -2.5470174  -4.7281222  -6.9042622</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25]  -9.0843573  -9.9826310  -9.9314946  -8.7164378  -8.6621834 -10.8019596</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31] -12.5681811 -14.5678377 -16.3044508 -17.2888659 -16.7752263 -15.1299182</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [37] -13.6746612 -12.2112189 -11.3865100  -9.8946198  -8.7661247  -7.6458672</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [43]  -6.6841949  -5.3150442  -4.1624307  -3.2247876  -4.3428585  -6.0950072</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [49]  -7.9107382 -10.1608787 -12.0041414 -14.4512557 -16.2626331 -18.4496583</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [55] -18.7391554 -16.4947389 -15.3575868 -13.7685810 -11.9577174  -9.8816123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [61]  -8.1258824  -6.2198935  -4.5553265  -3.9126760  -2.2274825  -0.4524672</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [67]   1.6072252   3.5574979   5.4761156   6.9578644   9.0421032  11.2462184</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [73]  12.7711594  14.0918038  15.6964364  17.5537930  19.2826263  20.7471894</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [79]  22.3828249  23.1623846  24.2888489</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Exemple 2: With a a polygonal arena</span></span></span>
<span class="r-in"><span><span class="co"># simulate a circular arena of 20 pixels radius and centered on the particle trajectory</span></span></span>
<span class="r-in"><span><span class="va">arenaEdge</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="polygons.html">polygons</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">TrackDat</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"x.pos"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                           <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">TrackDat</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"y.pos"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                           width <span class="op">=</span> <span class="fl">40</span>,</span></span>
<span class="r-in"><span>                                           height <span class="op">=</span> <span class="fl">40</span>,</span></span>
<span class="r-in"><span>                                           sides <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>                                           rotation <span class="op">=</span> <span class="op">(</span><span class="fl">45</span> <span class="op">*</span> <span class="va">pi</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fl">180</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                           draw <span class="op">=</span> <span class="cn">F</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">arenaEdge</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	4 obs. of  2 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ x.pos: num  45.4 45.4 17.1 17.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ y.pos: num  10.3 38.6 38.6 10.3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># draw the tracklet and the arena edge</span></span></span>
<span class="r-in"><span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="drawTracklets.html">drawTracklets</a></span><span class="op">(</span><span class="va">TrackDat</span>,</span></span>
<span class="r-in"><span>                     imgRes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>, <span class="fl">80</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                     add2It <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">graphics</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/graphics/polygon.html" class="external-link">polygon</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>                       x <span class="op">=</span> <span class="va">arenaEdge</span><span class="op">[[</span><span class="st">"x.pos"</span><span class="op">]</span><span class="op">]</span>, y <span class="op">=</span> <span class="va">arenaEdge</span><span class="op">[[</span><span class="st">"y.pos"</span><span class="op">]</span><span class="op">]</span>, cex <span class="op">=</span> <span class="fl">0.1</span></span></span>
<span class="r-in"><span>                     <span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="dist2Edge-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compute the distance to the closest part of the edge based on the form of the arena (here circular)</span></span></span>
<span class="r-in"><span><span class="co"># Negative values indicate increasing distance from the edge of the object in the direction of its center (the particle is considered inside) and vice versa.</span></span></span>
<span class="r-in"><span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu">dist2Edge</span><span class="op">(</span><span class="va">TrackDat</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                 edge <span class="op">=</span> <span class="va">arenaEdge</span>,</span></span>
<span class="r-in"><span>                 customFunc <span class="op">=</span> <span class="st">"PolygonArena"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  19.2277966  16.8796519  15.8271121  15.1006686  15.2913564  14.6384137</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7]  15.0309620  14.4320114  14.2088141  14.3899416  14.3019480  14.6244727</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13]  14.3809819  13.2962813  13.0217447  11.9337057  10.7098223   9.0357961</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19]   7.2087461   5.5057419   3.4901093   1.5372732  -0.4275203  -2.2741492</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25]  -4.3311166  -6.0063362  -6.9123259  -4.9165430  -3.9458275  -5.5872874</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31]  -6.9080986  -8.8394313 -10.4479257 -11.6694334 -11.1662214  -9.2781942</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [37]  -7.7858018  -6.7744362  -6.9329301  -6.9610106  -5.1356325  -3.2554390</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [43]  -1.6505652   0.1125051   1.5221174   2.6279702   1.4794940  -0.3487105</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [49]  -2.2441757  -4.4593061  -6.1848512  -8.6628137 -10.6700779 -12.7322906</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [55] -12.9901581 -11.2676548  -9.7218938  -7.8878287  -6.0644041  -3.9893752</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [61]  -2.2401427  -0.3705264   1.3419793   1.8971271   3.4190473   4.9316184</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [67]   6.8791351   8.6249111  10.6021036  12.3099056  14.3149765  16.1742334</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [73]  17.4141332  18.1533472  19.3366758  20.6460709  21.8604379  22.8353235</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [79]  24.0405956  24.3109146  25.0462451</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Exemple 3: With a polygonal arena, using a distance matrix to avoid tough computation</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Download the first dataset from the sample data repository</span></span></span>
<span class="r-in"><span><span class="va">Path2Data</span> <span class="op">&lt;-</span> <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="DLsampleData.html">DLsampleData</a></span><span class="op">(</span>dataSet <span class="op">=</span> <span class="fl">1</span>, tracker <span class="op">=</span> <span class="st">"TRex"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Path2Data</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Import the list containing the 9 vectors classically used for further computation</span></span></span>
<span class="r-in"><span><span class="va">trackDat</span> <span class="op">&lt;-</span> <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="readTrex.html">readTrex</a></span><span class="op">(</span><span class="va">Path2Data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load the distance matrix to the arena edge, an object or the location of one or several areas of interest (here we have created a distance map using ImageJ)</span></span></span>
<span class="r-in"><span><span class="co"># and retrieve the value of the edge limit (1) to plot it</span></span></span>
<span class="r-in"><span><span class="va">arenaEdge</span> <span class="op">&lt;-</span> <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="locROI.html">locROI</a></span><span class="op">(</span><span class="va">Path2Data</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, edgeCrit <span class="op">=</span> <span class="fl">1</span>, xy <span class="op">=</span> <span class="fl">1</span>, order <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># draw only the first tracklet</span></span></span>
<span class="r-in"><span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="drawTracklets.html">drawTracklets</a></span><span class="op">(</span><span class="va">trackDat</span>,</span></span>
<span class="r-in"><span>                 selTrack <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                 add2It <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">graphics</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/graphics/polygon.html" class="external-link">polygon</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">arenaEdge</span><span class="op">$</span><span class="va">x.pos</span>, y <span class="op">=</span> <span class="va">arenaEdge</span><span class="op">$</span><span class="va">y.pos</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Retrieve the distance from the edge using the distance matrix,</span></span></span>
<span class="r-in"><span><span class="co"># because it is tough and time consuming to compute the distance to the closest part of the arena edge in this case (lot of vertices on this polygon)</span></span></span>
<span class="r-in"><span><span class="co"># we can use another sister function helping to retrieve the distance to the edge from the distance matrix</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## NB: here NAs are introduced because some tracklets in the raw data have Inf values in x and y.pos, which usually produce a warning message</span></span></span>
<span class="r-in"><span><span class="co">## here the warning has been silenced but in this case retrieving the distance from the edge should be preceded by a filtering step to remove Inf values (see \code{\link{filterTracklets}})</span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"warn"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>warn <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="locPos.html">locPos</a></span><span class="op">(</span><span class="va">Path2Data</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, <span class="va">trackDat</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, Fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">x</span>, digits <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">950</span><span class="op">:</span><span class="fl">1000</span><span class="op">]</span> <span class="co"># display only the 50 position between the indices 950 and 1000</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>warn <span class="op">=</span> <span class="va">w</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://qpetitjean.github.io/qpetitjean_distill/" class="external-link">Quentin PETITJEAN</a>, <a href="https://vcalcagnoresearch.wordpress.com/" class="external-link">Vincent CALCAGNO</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

