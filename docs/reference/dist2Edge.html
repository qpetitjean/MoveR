<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Given a data frame containing tracking information for a given tracklet and a data frame containing the
coordinates of an object edges, this function compute the euclidean distance between the edge of the object (e.g., the arena)
and the coordinates of the particle over its trajectory. The function then returns the distance between each points of the particle's
trajectory and the closest point to the object edge."><title>Compute the distance from the particle to the edge of an object (e.g., the arena) over its trajectory. — dist2Edge • MoveR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Roboto-0.4.0/font.css" rel="stylesheet"><link href="../deps/_JetBrains%20Mono-0.4.0/font.css" rel="stylesheet"><link href="../deps/_Roboto%20Slab-0.4.0/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Compute the distance from the particle to the edge of an object (e.g., the arena) over its trajectory. — dist2Edge"><meta property="og:description" content="Given a data frame containing tracking information for a given tracklet and a data frame containing the
coordinates of an object edges, this function compute the euclidean distance between the edge of the object (e.g., the arena)
and the coordinates of the particle over its trajectory. The function then returns the distance between each points of the particle's
trajectory and the closest point to the object edge."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MoveR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--how-to">
    <span class="fas fa fas fa-book"></span>
     
    How To
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--how-to">
    <a class="dropdown-item" href="../articles/MoveR-ImportData.html">Import Data</a>
    <a class="dropdown-item" href="../articles/MoveR-Clean-FilterData.html">Clean/Filter Data</a>
    <a class="dropdown-item" href="../articles/MoveR-ComputeMetrics.html">Compute some metrics</a>
    <a class="dropdown-item" href="../articles/MoveR-SensitivityAnalysis.html">Conduct Sensitivity Analysis</a>
    <a class="dropdown-item" href="../articles/MoveR-ParallelComputation.html">Perform Parallel Computation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fas fa fas fa-history"></span>
     
    Changelog
  </a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/qpetitjean/MoveR/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Compute the distance from the particle to the edge of an object (e.g., the arena) over its trajectory.</h1>
      <small class="dont-index">Source: <a href="https://github.com/qpetitjean/MoveR/blob/HEAD/R/dist2Edge.R" class="external-link"><code>R/dist2Edge.R</code></a></small>
      <div class="d-none name"><code>dist2Edge.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given a data frame containing tracking information for a given tracklet and a data frame containing the
coordinates of an object edges, this function compute the euclidean distance between the edge of the object (e.g., the arena)
and the coordinates of the particle over its trajectory. The function then returns the distance between each points of the particle's
trajectory and the closest point to the object edge.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dist2Edge</span><span class="op">(</span><span class="va">df</span>, <span class="va">edge</span>, <span class="va">customFunc</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>df</dt>
<dd><p>A data frame containing at x, y coordinates named "x.pos", "y.pos", for a tracklet.</p></dd>


<dt>edge</dt>
<dd><p>A data frame containing x, y coordinates named "x.pos", "y.pos" specifiyng the location of the
arena or any object edge.</p></dd>


<dt>customFunc</dt>
<dd><p>A function used to specify the formula allowing to compute the distance between a given object or arena edge and the particle over its trajectory.
It is possible to call already implemented methods for Circular arena by calling customFunc = "CircularArena".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>This function returns a vector containing the distance between each points of the
trajectory and the closest point of the object edge. Negative values indicate increasing distance
from the edge of the object in the direction of its center (the particle is considered inside) and vice versa.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="dist2Pt.html">dist2Pt</a></code>, <code><a href="locaPos.html">locaPos</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Quentin PETITJEAN</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Exemple 1: With a circular arena</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2023</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># generate a dummy tracklet</span></span></span>
<span class="r-in"><span><span class="co">## start to specify some parameters to generate the tracklet</span></span></span>
<span class="r-in"><span><span class="va">TrackL</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fl">100</span> <span class="co"># the length of the tracklet or a sequence to randomly sample tracklet's length</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TrackDatTemp</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">trajr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/trajr/man/TrajGenerate.html" class="external-link">TrajGenerate</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">TrackL</span>, <span class="fl">1</span><span class="op">)</span>, random <span class="op">=</span> <span class="cn">TRUE</span>, fps <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">TrackDat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    x.pos <span class="op">=</span> <span class="va">TrackDatTemp</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">TrackDatTemp</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    y.pos <span class="op">=</span> <span class="va">TrackDatTemp</span><span class="op">[[</span><span class="st">"y"</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">TrackDatTemp</span><span class="op">[[</span><span class="st">"y"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    frame <span class="op">=</span> <span class="va">TrackDatTemp</span><span class="op">[[</span><span class="st">"time"</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># simulate a circular arena of 20 pixels radius and centered on the particle trajectory</span></span></span>
<span class="r-in"><span><span class="va">arenaEdge</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="circles.html">circles</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">TrackDat</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"x.pos"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">TrackDat</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"y.pos"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            radius <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>                            draw <span class="op">=</span> <span class="cn">F</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">arenaEdge</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	500 obs. of  2 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ x.pos: num  51.3 51.3 51.3 51.2 51.2 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ y.pos: num  24.4 24.7 25 25.2 25.5 ...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># draw the tracklet and the arena edge</span></span></span>
<span class="r-in"><span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="drawTracklets.html">drawTracklets</a></span><span class="op">(</span><span class="va">TrackDat</span>,</span></span>
<span class="r-in"><span>                 imgRes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>, <span class="fl">80</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 add2It <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>                   x <span class="op">=</span> <span class="va">arenaEdge</span><span class="op">[[</span><span class="st">"x.pos"</span><span class="op">]</span><span class="op">]</span>, y <span class="op">=</span> <span class="va">arenaEdge</span><span class="op">[[</span><span class="st">"y.pos"</span><span class="op">]</span><span class="op">]</span>, cex <span class="op">=</span> <span class="fl">0.1</span></span></span>
<span class="r-in"><span>                 <span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="dist2Edge-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compute the distance to the closest part of the edge based on the form of the arena (here circular)</span></span></span>
<span class="r-in"><span><span class="co"># Negative values indicate increasing distance from the edge of the object in the direction of its center (the particle is considered inside) and vice versa.</span></span></span>
<span class="r-in"><span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu">dist2Edge</span><span class="op">(</span><span class="va">TrackDat</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                 edge <span class="op">=</span> <span class="va">arenaEdge</span>,</span></span>
<span class="r-in"><span>                 customFunc <span class="op">=</span> <span class="st">"CircularArena"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  18.7823577  16.4582563  15.0931207  13.8661236  13.3560386  11.9547261</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7]  11.4459542  10.2583611   9.5002640   9.2819667   8.8674120   8.9262716</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13]   8.5717987   7.5194782   7.3970682   6.6314271   5.7005973   4.3696927</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19]   2.6922671   0.9774847  -0.8916157  -2.5470174  -4.7281222  -6.9042622</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25]  -9.0843573  -9.9826310  -9.9314946  -8.7164378  -8.6621834 -10.8019596</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31] -12.5681811 -14.5678377 -16.3044508 -17.2888659 -16.7752263 -15.1299182</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [37] -13.6746612 -12.2112189 -11.3865100  -9.8946198  -8.7661247  -7.6458672</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [43]  -6.6841949  -5.3150442  -4.1624307  -3.2247876  -4.3428585  -6.0950072</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [49]  -7.9107382 -10.1608787 -12.0041414 -14.4512557 -16.2626331 -18.4496583</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [55] -18.7391554 -16.4947389 -15.3575868 -13.7685810 -11.9577174  -9.8816123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [61]  -8.1258824  -6.2198935  -4.5553265  -3.9126760  -2.2274825  -0.4524672</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [67]   1.6072252   3.5574979   5.4761156   6.9578644   9.0421032  11.2462184</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [73]  12.7711594  14.0918038  15.6964364  17.5537930  19.2826263  20.7471894</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [79]  22.3828249  23.1623846  24.2888489</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Exemple 2: With a a polygonal arena, using a distance matrix to avoid tough computation</span></span></span>
<span class="r-in"><span><span class="co">## Not run:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Download the first dataset from the sample data repository</span></span></span>
<span class="r-in"><span><span class="va">Path2Data</span> <span class="op">&lt;-</span> <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="DLsampleData.html">DLsampleData</a></span><span class="op">(</span>dataSet <span class="op">=</span> <span class="fl">1</span>, tracker <span class="op">=</span> <span class="st">"TRex"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Path2Data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "C:\\Users\\quent\\AppData\\Local\\Temp\\RtmpIBGA5h\\MoveR_SampleData-main\\sample_1\\TRexOutput"                                                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2] "C:\\Users\\quent\\AppData\\Local\\Temp\\RtmpIBGA5h\\MoveR_SampleData-main\\sample_1\\ReferenceData\\DistMatrixFromArenaEdge_2602_ISA3080_Low_5.mov_1800.txt"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "C:\\Users\\quent\\AppData\\Local\\Temp\\RtmpIBGA5h\\MoveR_SampleData-main\\sample_1\\ReferenceData\\RefDat_2602_ISA3080_Low_5.csv"                          </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Import the list containing the 9 vectors classically used for further computation</span></span></span>
<span class="r-in"><span><span class="va">Data</span> <span class="op">&lt;-</span> <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="readTrex.html">readTrex</a></span><span class="op">(</span><span class="va">Path2Data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># convert it to a list of tracklets</span></span></span>
<span class="r-in"><span><span class="va">trackDat</span> <span class="op">&lt;-</span> <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="convert2Tracklets.html">convert2Tracklets</a></span><span class="op">(</span><span class="va">Data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span>, by <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load the distance matrix to the arena edge, an object or the location of one or several areas of interest (here we have created a distance map using ImageJ)</span></span></span>
<span class="r-in"><span><span class="va">distMat</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.delim</a></span><span class="op">(</span><span class="va">Path2Data</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                       dec <span class="op">=</span> <span class="st">"."</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#  retrieve the value of the edge limit (1) to plot it</span></span></span>
<span class="r-in"><span><span class="va">arenaEdge</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">distMat</span> <span class="op">==</span> <span class="fl">1</span>, arr.ind <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y.pos"</span>, <span class="st">"x.pos"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># draw only the first tracklet</span></span></span>
<span class="r-in"><span><span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="drawTracklets.html">drawTracklets</a></span><span class="op">(</span><span class="va">trackDat</span>,</span></span>
<span class="r-in"><span>                 selTrack <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                 add2It <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>                   x <span class="op">=</span> <span class="va">arenaEdge</span><span class="op">[[</span><span class="st">"x.pos"</span><span class="op">]</span><span class="op">]</span>, y <span class="op">=</span> <span class="va">arenaEdge</span><span class="op">[[</span><span class="st">"y.pos"</span><span class="op">]</span><span class="op">]</span>, cex <span class="op">=</span> <span class="fl">0.1</span></span></span>
<span class="r-in"><span>                 <span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="dist2Edge-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Retrieve the distance from the edge using the distance matrix,</span></span></span>
<span class="r-in"><span><span class="co"># because it is tough to compute the distance to the closest part of the arena edge in this case</span></span></span>
<span class="r-in"><span><span class="co"># we can use another sister function helping to retrieve the distance to the edge from the distance</span></span></span>
<span class="r-in"><span><span class="co"># matrix</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## NB: here NAs are introduced because some tracklets in the raw data have Inf values in x and y.pos, which usually produce a warning message</span></span></span>
<span class="r-in"><span><span class="co">## here the warning has been silenced but in this case retrieving the distance from the edge should be preceded by a filtering step to remove Inf values (see \code{\link{filterTracklets}})</span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"warn"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>warn <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">trackDat</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fu">MoveR</span><span class="fu">::</span><span class="fu"><a href="locaPos.html">locaPos</a></span><span class="op">(</span><span class="va">distMat</span>, <span class="va">trackDat</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, Fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">x</span>, digits <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">950</span><span class="op">:</span><span class="fl">1000</span>, <span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        maj.ax      angle min.ax    x.pos     y.pos identity frame</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 950  25.16856 -2.2495432     NA 3007.739 184.11171        0   949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 951  22.54196 -2.3630631     NA 3008.192 182.75757        0   950</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 952  21.43825 -2.3916571     NA 3004.497 181.63637        0   951</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 953  20.67534 -2.4862382     NA 3002.908 181.31097        0   952</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 954  23.18185 -2.5544212     NA 3001.939 177.72223        0   953</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 955  23.06143 -2.5468886     NA 2998.755 175.28192        0   954</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 956  18.99402  0.6965405     NA 2996.066 172.19162        0   955</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 957  19.82391  0.6651486     NA 2994.120 168.42169        0   956</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 958  21.30811 -2.2509794     NA 2989.896 165.04597        0   957</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 959  18.93035  0.8842158     NA 2986.844 159.45665        0   958</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 960  19.61641 -2.2721188     NA 2983.474 155.68787        0   959</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 961  21.18234 -2.2575943     NA 2981.550 152.99445        0   960</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 962  18.69484  1.0738502     NA 2980.304 151.27951        0   961</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 963  19.35811 -2.2445836     NA 2980.413 151.63750        0   962</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 964  16.80550  0.9879674     NA 2979.787 151.20000        0   963</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 965  18.16243  0.7149539     NA 2980.345 151.66060        0   964</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 966  18.18480  0.8497069     NA 2980.198 151.53703        0   965</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 967  19.59727  0.7914248     NA 2980.264 152.14723        0   966</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 968  23.34755  0.6060944     NA 2979.577 151.13496        0   967</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 969  18.97597  0.7088809     NA 2980.506 151.58861        0   968</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 970  18.99671 -2.4571209     NA 2980.360 151.21118        0   969</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 971  20.21753 -2.5122445     NA 2980.617 151.22223        0   970</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 972  21.26458 -2.4875453     NA 2980.571 151.08824        0   971</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 973  20.60793 -2.5402927     NA 2981.024 150.42169        0   972</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 974  20.80412 -2.5362704     NA 2981.241 150.33736        0   973</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 975  21.04786  0.7443136     NA 2981.159 149.20454        0   974</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 976  21.42217  0.7403687     NA 2980.098 147.82184        0   975</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 977  24.46404 -2.4878116     NA 2979.643 147.45810        0   976</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 978  24.77028 -2.2122121     NA 2977.995 145.14285        0   977</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 979  22.28426 -2.1839714     NA 2977.509 142.60234        0   978</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 980  21.64240 -2.1315374     NA 2976.693 139.54218        0   979</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 981  22.88063 -2.1552153     NA 2974.349 136.41714        0   980</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 982  22.80894 -2.1014969     NA 2972.467 132.35165        0   981</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 983  20.27789  1.0418344     NA 2968.437 126.93414        0   982</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 984  22.58809 -2.1856568     NA 2963.572 122.17919        0   983</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 985  19.14518  0.9702182     NA 2958.912 114.72941        0   984</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 986  22.19151 -2.2058880     NA 2953.823 109.57458        0   985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 987  26.07912  0.9731150     NA 2947.637 100.92179        0   986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 988  22.62057 -2.2105091     NA 2942.827  95.25946        0   987</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 989  19.83150  1.0121182     NA 2937.799  85.52201        0   988</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 990  23.40609 -2.2072537     NA 2931.343  80.03371        0   989</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 991  20.19806  1.0806229     NA 2929.823  79.25000        0   990</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 992  20.06984  1.0695091     NA 2930.572  80.65476        0   991</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 993  20.28101  1.1777627     NA 2930.913  82.15000        0   992</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 994  19.04386  1.1270846     NA 2930.387  83.20000        0   993</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 995  17.77045  1.0332778     NA 2929.646  85.65987        0   994</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 996  21.87505  0.8094050     NA 2928.196  86.23313        0   995</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 997  21.90496 -2.3661096     NA 2927.581  87.75000        0   996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 998  20.16120 -2.3843305     NA 2926.831  89.06626        0   997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 999  20.54578 -2.5229805     NA 2926.729  91.34568        0   998</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1000 19.99702  0.3121337     NA 2925.987  91.94304        0   999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      MoveR::locaPos(distMat, trackDat[[1]], Fun = function(x) round(x, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 950                                                                 139</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 951                                                                 138</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 952                                                                 137</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 953                                                                 136</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 954                                                                 133</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 955                                                                 130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 956                                                                 127</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 957                                                                 123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 958                                                                 120</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 959                                                                 114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 960                                                                 111</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 961                                                                 108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 962                                                                 106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 963                                                                 107</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 964                                                                 106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 965                                                                 107</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 966                                                                 107</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 967                                                                 107</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 968                                                                 106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 969                                                                 107</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 970                                                                 106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 971                                                                 106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 972                                                                 106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 973                                                                 105</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 974                                                                 105</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 975                                                                 104</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 976                                                                 103</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 977                                                                 102</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 978                                                                 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 979                                                                  98</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 980                                                                  95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 981                                                                  91</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 982                                                                  87</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 983                                                                  82</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 984                                                                  77</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 985                                                                  70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 986                                                                  65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 987                                                                  57</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 988                                                                  50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 989                                                                  41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 990                                                                  35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 991                                                                  34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 992                                                                  36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 993                                                                  37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 994                                                                  38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 995                                                                  41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 996                                                                  41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 997                                                                  43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 998                                                                  44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 999                                                                  46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1000                                                                 47</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>warn <span class="op">=</span> <span class="va">w</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## End(Not run)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://qpetitjean.github.io/qpetitjean_distill/" class="external-link">Quentin PETITJEAN</a>, <a href="https://vcalcagnoresearch.wordpress.com/" class="external-link">Vincent CALCAGNO</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

